{% extends 'base.html' %}

{% block title %}Vehículos - Shipping Manager{% endblock %}

{% block content %}
<div class="row mb-4">
    <div class="col">
        <h1><i class="bi bi-truck me-2"></i>Vehículos</h1>
    </div>
    <div class="col-auto">
        <a href="{{ url_for('recursos.create_vehiculo') }}" class="btn btn-primary"><i class="bi bi-plus-circle"></i>
            Nuevo</a>
    </div>
</div>

<div class="card border-0 shadow-sm">
    <div class="card-body p-0">
        <table class="table table-hover mb-0">
            <thead class="table-light">
                <tr>
                    <th>Patente</th>
                    <th>Modelo</th>
                    <th>Tipo</th>
                    <th class="text-center">VTV</th>
                    <th class="text-center">Seguro</th>
                    <th class="text-center">Habilitación</th>
                    <th class="text-center">Estado</th>
                </tr>
            </thead>
            <tbody>
                {% for v in vehiculos %}
                {% set estado = v.estado_documentacion %}
                <tr>
                    <td><strong>{{ v.patente }}</strong></td>
                    <td>{{ v.modelo or '-' }}</td>
                    <td>{{ v.tipo or '-' }}</td>
                    <td class="text-center"><span class="badge bg-{{ estado.fields.vto_vtv }}">{{
                            v.vto_vtv.strftime('%d/%m/%y') if v.vto_vtv else '-' }}</span></td>
                    <td class="text-center"><span class="badge bg-{{ estado.fields.vto_seguro }}">{{
                            v.vto_seguro.strftime('%d/%m/%y') if v.vto_seguro else '-' }}</span></td>
                    <td class="text-center"><span class="badge bg-{{ estado.fields.vto_habilitacion }}">{{
                            v.vto_habilitacion.strftime('%d/%m/%y') if v.vto_habilitacion else '-' }}</span></td>
                    <td class="text-center"><span class="badge bg-{{ estado.global_status }}">{{ 'Vencido' if
                            estado.global_status == 'danger' else ('Por Vencer' if estado.global_status == 'warning'
                            else 'OK') }}</span></td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="7" class="text-center text-muted py-3">No hay vehículos</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}